(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(53)},28:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(21),l=n.n(c),u=(n(28),n(7)),o=n(0),i=n(3),s=n.n(i),p=n(6),m=n(4),f=n(10),d=n(22),E=n.n(d),b=(n(50),Object(a.createContext)()),v=E.a.create({baseURL:"http://localhost:3000",headers:{"Content-Type":"application/json"}}),h=function(e){var t=e.children,n=function(){var e=Object(p.a)(s.a.mark(function e(t,n){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.post("/login",{email:t,mdp:n});case 2:return(a=e.sent)?(localStorage.setItem("token",a.data),window.location="/Lister"):alert(a.data.error),e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),a=function(){var e=Object(p.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.post("/inscription",t);case 2:return(n=e.sent).data?window.location="/connexion":alert("erreur inscription"),e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(p.a)(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/Lister",{headers:{"x-access-token":localStorage.getItem("token")}});case 2:return t=e.sent,n=localStorage.getItem("token"),console.log("tok",n),n&&Object(f.a)(n)||(localStorage.removeItem("token"),window.location="/connexion"),e.abrupt("return",t);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(b.Provider,{value:{dispatchAPI:function(e,t){switch(e){case"login":return n(t.email,t.mdp);case"inscription":return a(t);case"Lister":return c();case"deconnexion":return function(){var e=v.get("/deconnxion");return localStorage.clear(),window.location="/connexion",e}();default:return new Error("Unknown dispatchAPI type!")}}}},t)},x=function(){return Object(a.useContext)(b)},g=function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],c=t[1],l=x().dispatchAPI,u=function(){var e=Object(p.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("Lister");case 2:t=e.sent,c(t.data),console.log("resultliste",t);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)(function(){u()},[]),n.map(function(e,t){return r.a.createElement("div",null,r.a.createElement("ul",{key:t},e.email))})},w=function(){return r.a.createElement("div",null,r.a.createElement("h2",null," Accueil "),r.a.createElement("p",null," Bievenue, content de vous revoir "))},j=function(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(""),u=Object(m.a)(l,2),i=u[0],f=u[1],d=Object(o.f)(),E=x().dispatchAPI,b=function(){var e=Object(p.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={email:n,mdp:i},e.next=4,E("inscription",a);case 4:d("/connexion");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h1",null,"Inscription "),r.a.createElement("form",{action:""},r.a.createElement("label",null,"Pseudo: "),r.a.createElement("input",{type:"text",id:"email",value:n,onChange:function(e){return c(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"mdp:"),r.a.createElement("input",{type:"password",id:"mdp",value:i,onChange:function(e){return f(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-success start",onClick:b}," Enregistrer")))},O=function(){console.log("dispatchau",x());var e=x().dispatchAPI,t=Object(a.useState)(""),n=Object(m.a)(t,2),c=n[0],l=n[1],u=Object(a.useState)(""),i=Object(m.a)(u,2),f=i[0],d=i[1],E=(Object(o.f)(),function(){var t=Object(p.a)(s.a.mark(function t(n){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={email:c,mdp:f},t.next=4,e("login",a);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());return r.a.createElement("div",null,r.a.createElement("h1",null,"connexion "),r.a.createElement("form",{action:""},r.a.createElement("label",null,"Pseudo: "),r.a.createElement("input",{type:"text",id:"email",value:c,onChange:function(e){return l(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"mdp:"),r.a.createElement("input",{type:"password",id:"mot de passe",value:f,onChange:function(e){return d(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-success start",onClick:E}," connexion")))},k=function(){var e=x().dispatchAPI,t=Object(o.f)();return Object(a.useEffect)(function(){var n=e("deconnexion");n.data?t("/connexion"):alert(n.data.message)},[]),r.a.createElement("div",null)},y=function(){return r.a.createElement(h,null,r.a.createElement(u.a,null,r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/",element:r.a.createElement(w,null)}),r.a.createElement(o.a,{exact:!0,path:"/Inscription",element:r.a.createElement(j,null)}),r.a.createElement(o.a,{exact:!0,path:"/connexion",element:r.a.createElement(O,null)}),r.a.createElement(o.a,{exact:!0,path:"/Lister",element:r.a.createElement(g,null)}),r.a.createElement(o.a,{exact:!0,path:"/deconnexion",element:r.a.createElement(k,null)}))))},I=function(e){e&&e instanceof Function&&n.e(1).then(n.bind(null,54)).then(function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,l=t.getTTFB;n(e),a(e),r(e),c(e),l(e)})};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),I()}},[[23,3,2]]]);
//# sourceMappingURL=main.2e43f974.chunk.js.map